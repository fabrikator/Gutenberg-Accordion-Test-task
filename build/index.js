(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.blockEditor,c=window.wp.components,n=window.wp.i18n;(0,t.registerBlockType)("custom/accordion",{title:(0,n.__)("Accordion","accordion-block"),icon:"list-view",category:"widgets",supports:{html:!1},edit:t=>{const c=(0,o.useBlockProps)();return(0,e.createElement)("div",{...c},(0,e.createElement)(o.InnerBlocks,{allowedBlocks:["custom/accordion-item"],template:[["custom/accordion-item"]],templateLock:!1}))},save:t=>{const c=o.useBlockProps.save();return(0,e.createElement)("div",{...c,className:"accordion",role:"tablist"},(0,e.createElement)(o.InnerBlocks.Content,null))}}),(0,t.registerBlockType)("custom/accordion-item",{title:(0,n.__)("Accordion Item","accordion-block"),icon:"list-view",category:"widgets",parent:["custom/accordion"],attributes:{title:{type:"string",source:"text",selector:".accordion-item-title",default:(0,n.__)("Accordion Title","accordion-block")},content:{type:"string",source:"html",selector:".accordion-item-content",default:""}},edit:t=>{const{attributes:i,setAttributes:a}=t,r=(0,o.useBlockProps)();return(0,e.createElement)("div",{...r,className:"accordion-item",role:"tabpanel"},(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(c.PanelBody,{title:(0,n.__)("Accordion Item Settings","accordion-block"),initialOpen:!0},(0,e.createElement)(c.TextControl,{label:(0,n.__)("Accordion Title","accordion-block"),value:i.title,onChange:e=>a({title:e})}))),(0,e.createElement)(o.RichText,{tagName:"div",className:"accordion-item-title",value:i.title,onChange:e=>a({title:e}),placeholder:(0,n.__)("Accordion Title","accordion-block"),role:"tab","aria-expanded":"false",tabIndex:"0",onKeyDown:e=>{if("Enter"===e.key||" "===e.key){const t=e.target.nextElementSibling,o="true"===e.target.getAttribute("aria-expanded");e.target.setAttribute("aria-expanded",!o),t.setAttribute("aria-hidden",o)}}}),(0,e.createElement)("div",{className:"accordion-item-content",role:"region","aria-hidden":"true",tabIndex:"0"},(0,e.createElement)(o.RichText,{tagName:"div",className:"accordion-item-content",value:i.content,onChange:e=>a({content:e}),placeholder:(0,n.__)("Add accordion content...","accordion-block")})))},save:t=>{const{attributes:c}=t,n=o.useBlockProps.save();return(0,e.createElement)("div",{...n,className:"accordion-item",role:"tabpanel"},(0,e.createElement)("div",{className:"accordion-item-title"},c.title),(0,e.createElement)("div",{className:"accordion-item-content",role:"region","aria-hidden":"true",tabIndex:"0"},(0,e.createElement)(o.RichText.Content,{tagName:"div",value:c.content})))}}),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".accordion-item-title").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".accordion-item"),o=t.classList.contains("open");document.querySelectorAll(".accordion-item.open").forEach((e=>{e.classList.remove("open"),e.querySelector(".accordion-item-title").setAttribute("aria-expanded","false"),e.querySelector(".accordion-item-content").style.display="none"})),o?(t.classList.remove("open"),e.setAttribute("aria-expanded","false"),t.querySelector(".accordion-item-content").style.display="none"):(t.classList.add("open"),e.setAttribute("aria-expanded","true"),t.querySelector(".accordion-item-content").style.display="block")}))}))}))})();